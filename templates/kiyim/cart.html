{% extends 'kiyim/base.html' %}
{% block title %}–°–µ–±–µ—Ç ‚Äî MODA{% endblock %}
{% block content %}
<div style="max-width:1100px;margin:60px auto;padding:0 40px;">
    <div style="margin-bottom:40px;">
        <div style="font-size:11px;letter-spacing:4px;color:var(--gold);text-transform:uppercase;margin-bottom:12px;">–ú–µ–Ω—ñ“£ –°–µ–±–µ—Ç–∏–º</div>
        <h1 style="font-family:'Cormorant Garamond',serif;font-size:48px;font-weight:300;color:var(--dark);">–°–µ–±–µ—Ç</h1>
    </div>
    {% if items %}
    <div style="display:grid;grid-template-columns:1fr 380px;gap:40px;align-items:start;">
        <div>
            {% for item in items %}
            <div style="display:grid;grid-template-columns:100px 1fr auto;gap:20px;padding:24px 0;border-bottom:1px solid var(--border);align-items:center;">
                <div style="aspect-ratio:1/1;background:var(--cream);overflow:hidden;">
                    {% if item.product.main_image %}<img src="{{ item.product.main_image.url }}" alt="{{ item.product.name }}" style="width:100%;height:100%;object-fit:cover;">
                    {% else %}<div style="width:100%;height:100%;display:flex;align-items:center;justify-content:center;font-size:32px;">{% if item.product.category == 'oyoq' %}üëü{% else %}üëó{% endif %}</div>{% endif %}
                </div>
                <div>
                    <div style="font-size:11px;letter-spacing:2px;color:var(--text-muted);text-transform:uppercase;margin-bottom:6px;">{{ item.product.get_category_display }}</div>
                    <div style="font-family:'Cormorant Garamond',serif;font-size:22px;color:var(--dark);margin-bottom:6px;">{{ item.product.name }}</div>
                    <div style="font-size:13px;color:var(--text-muted);">–†–∞–∑–º–µ—Ä: <strong>{{ item.size }}</strong> ‚Ä¢ {{ item.quantity }} –¥–æ–Ω–∞</div>
                    <div style="font-size:11px;color:var(--text-muted);margin-top:4px;">{{ item.product.seller.shop_name }}</div>
                </div>
                <div style="text-align:right;">
                    <div style="font-size:18px;color:var(--gold);font-weight:500;margin-bottom:12px;">{{ item.total|floatformat:0 }} —Å—û–º</div>
                    <form method="post" action="{% url 'remove_from_cart' item.pk %}">
                        {% csrf_token %}
                        <button type="submit" style="background:none;border:none;color:var(--text-muted);cursor:pointer;font-size:12px;letter-spacing:1px;transition:color 0.2s;" onmouseover="this.style.color='var(--error)'" onmouseout="this.style.color='var(--text-muted)'">‚úï ”®—à–∏—Ä–∏—û</button>
                    </form>
                </div>
            </div>
            {% endfor %}
        </div>
        <div>
            <div style="background:var(--white);border:1px solid var(--border);padding:32px;position:sticky;top:90px;">
                <h2 style="font-family:'Cormorant Garamond',serif;font-size:24px;color:var(--dark);margin-bottom:24px;">–ë—É–π—Ä—ã—Ç–º–∞ –ñ–∏—ã–Ω—Ç—ã“ì—ã</h2>
                {% for item in items %}
                <div style="display:flex;justify-content:space-between;font-size:13px;margin-bottom:10px;color:var(--text-muted);">
                    <span>{{ item.product.name }} ({{ item.size }}) √ó {{ item.quantity }}</span>
                    <span>{{ item.total|floatformat:0 }}</span>
                </div>
                {% endfor %}
                <div style="border-top:1px solid var(--border);margin:20px 0;padding-top:20px;">
                    <div style="display:flex;justify-content:space-between;align-items:center;">
                        <span style="font-size:14px;letter-spacing:1px;text-transform:uppercase;">–ñ–∞–ª–ø—ã</span>
                        <span style="font-size:24px;color:var(--gold);font-weight:500;">{{ total|floatformat:0 }} —Å—û–º</span>
                    </div>
                </div>
                <form method="post" action="{% url 'checkout' %}">
                    {% csrf_token %}
                    <div class="form-group">
                        <label class="form-label">–ñ–µ—Ç–∫–µ—Ä–∏—û –ú–µ–∫–µ–Ω-–∂–∞–π—ã</label>
                        <textarea name="address" class="form-control" rows="3" required placeholder="–¢–æ–ª—ã“õ –º–µ–∫–µ–Ω-–∂–∞–π—ã“£—ã–∑–¥—ã –∫–∏—Ä–∏“£–∏–∑..."></textarea>
                    </div>
                    <button type="submit" class="btn btn-gold" style="width:100%;font-size:13px;">–ë—É–π—Ä—ã—Ç–º–∞ –ë–µ—Ä–∏—û</button>
                </form>
                <a href="{% url 'product_list' %}" style="display:block;text-align:center;margin-top:16px;font-size:12px;color:var(--text-muted);text-decoration:none;letter-spacing:1px;">‚Üê –ê–ª—ã—û–¥—ã –ñ–∞–ª“ì–∞—Å—Ç—ã—Ä—ã—û</a>
            </div>
        </div>
    </div>
    {% else %}
    <div style="text-align:center;padding:80px 40px;border:1px dashed var(--border);">
        <div style="font-size:64px;margin-bottom:20px;">üõí</div>
        <h2 style="font-family:'Cormorant Garamond',serif;font-size:32px;color:var(--dark);margin-bottom:12px;">–°–µ–±–µ—Ç –ë–æ—Å</h2>
        <p style="color:var(--text-muted);margin-bottom:32px;">”®–Ω–∏–º–ª–µ—Ä “õ–æ—Å—ã“£—ã–∑ “≥”ô–º –∞–ª—ã—û–¥—ã –±–∞—Å–ª–∞“£—ã–∑</p>
        <a href="{% url 'product_list' %}" class="btn btn-gold">–ê–ª—ã—û–¥—ã –ë–∞—Å–ª–∞—û</a>
    </div>
    {% endif %}
</div>
{% endblock %}
