<!DOCTYPE html>
<html lang="kaa">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}MODA ‚Äî “ö–∞—Ä–∞“õ–∞–ª–ø–∞“õ –ö–∏–π–∏–º –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞—Å—ã{% endblock %}</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,600;1,300;1,400&family=Jost:wght@200;300;400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --cream: #F5F0E8; --ivory: #FAF7F2; --gold: #C9A96E;
            --dark: #1A1410; --brown: #6B4F35; --text: #3D2E22;
            --text-muted: #8C7055; --border: #DDD0B8;
            --white: #FFFFFF; --success: #4A7C59; --error: #8B3A3A;
        }
        * { margin:0; padding:0; box-sizing:border-box; }
        body { font-family:'Jost',sans-serif; background:var(--ivory); color:var(--text); font-weight:300; line-height:1.7; }

        /* NAVBAR */
        .navbar { position:sticky; top:0; z-index:1000; background:var(--dark); padding:0 40px; display:flex; align-items:center; justify-content:space-between; height:70px; border-bottom:1px solid rgba(201,169,110,0.3); }
        .nav-logo { font-family:'Cormorant Garamond',serif; font-size:28px; font-weight:600; letter-spacing:6px; color:var(--gold); text-decoration:none; text-transform:uppercase; }
        .nav-logo span { color:var(--white); }
        .nav-links { display:flex; gap:32px; align-items:center; list-style:none; }
        .nav-links a { color:rgba(255,255,255,0.7); text-decoration:none; font-size:13px; letter-spacing:2px; text-transform:uppercase; font-weight:400; transition:color 0.3s; }
        .nav-links a:hover { color:var(--gold); }
        .nav-actions { display:flex; gap:20px; align-items:center; }
        .nav-btn { background:transparent; border:1px solid var(--gold); color:var(--gold); padding:8px 20px; font-family:'Jost',sans-serif; font-size:12px; letter-spacing:2px; text-transform:uppercase; cursor:pointer; text-decoration:none; transition:all 0.3s; }
        .nav-btn:hover, .nav-btn.active { background:var(--gold); color:var(--dark); }
        .cart-icon { color:var(--white); font-size:18px; cursor:pointer; text-decoration:none; position:relative; }
        .cart-badge { position:absolute; top:-8px; right:-8px; background:var(--gold); color:var(--dark); border-radius:50%; width:18px; height:18px; font-size:10px; font-weight:500; display:flex; align-items:center; justify-content:center; }

        /* MESSAGES */
        .messages-container { position:fixed; top:80px; right:20px; z-index:9999; display:flex; flex-direction:column; gap:10px; }
        .msg { padding:14px 20px; border-radius:2px; font-size:13px; min-width:280px; display:flex; justify-content:space-between; align-items:center; animation:slideIn 0.3s ease; box-shadow:0 4px 20px rgba(0,0,0,0.15); }
        .msg-success { background:var(--success); color:white; }
        .msg-error { background:var(--error); color:white; }
        .msg-info { background:var(--brown); color:white; }
        @keyframes slideIn { from{transform:translateX(100px);opacity:0} to{transform:translateX(0);opacity:1} }
        .msg-close { cursor:pointer; opacity:0.7; font-size:16px; margin-left:15px; }

        main { min-height:calc(100vh - 140px); }

        /* FOOTER */
        footer { background:var(--dark); color:rgba(255,255,255,0.5); padding:50px 40px 30px; margin-top:80px; }
        .footer-grid { display:grid; grid-template-columns:2fr 1fr 1fr 1fr; gap:40px; margin-bottom:40px; }
        .footer-logo { font-family:'Cormorant Garamond',serif; font-size:32px; color:var(--gold); letter-spacing:4px; margin-bottom:12px; }
        .footer-desc { font-size:13px; line-height:1.8; }
        .footer-col h4 { color:var(--white); font-size:11px; letter-spacing:3px; text-transform:uppercase; margin-bottom:16px; font-weight:400; }
        .footer-col a { display:block; color:rgba(255,255,255,0.4); text-decoration:none; font-size:13px; margin-bottom:8px; transition:color 0.3s; }
        .footer-col a:hover { color:var(--gold); }
        .footer-bottom { border-top:1px solid rgba(255,255,255,0.1); padding-top:24px; text-align:center; font-size:12px; }

        /* BUTTONS */
        .btn { display:inline-block; padding:14px 36px; font-family:'Jost',sans-serif; font-size:12px; letter-spacing:3px; text-transform:uppercase; cursor:pointer; text-decoration:none; border:none; transition:all 0.3s; font-weight:400; }
        .btn-primary { background:var(--dark); color:var(--gold); border:1px solid var(--gold); }
        .btn-primary:hover { background:var(--gold); color:var(--dark); }
        .btn-gold { background:var(--gold); color:var(--dark); }
        .btn-gold:hover { background:var(--brown); color:var(--white); }
        .btn-outline { background:transparent; color:var(--dark); border:1px solid var(--dark); }
        .btn-outline:hover { background:var(--dark); color:var(--white); }

        /* FORMS */
        .form-group { margin-bottom:20px; }
        .form-label { display:block; font-size:11px; letter-spacing:2px; text-transform:uppercase; color:var(--text-muted); margin-bottom:8px; }
        .form-control { width:100%; padding:12px 16px; background:var(--white); border:1px solid var(--border); font-family:'Jost',sans-serif; font-size:14px; color:var(--text); outline:none; transition:border 0.3s; border-radius:0; }
        .form-control:focus { border-color:var(--gold); }
        select.form-control { appearance:none; background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='8' viewBox='0 0 12 8'%3E%3Cpath d='M1 1l5 5 5-5' stroke='%238C7055' fill='none' stroke-width='1.5'/%3E%3C/svg%3E"); background-repeat:no-repeat; background-position:right 14px center; padding-right:36px; }

        /* PRODUCT CARDS */
        .product-card { background:var(--white); overflow:hidden; transition:transform 0.4s,box-shadow 0.4s; cursor:pointer; }
        .product-card:hover { transform:translateY(-4px); box-shadow:0 20px 60px rgba(0,0,0,0.12); }
        .product-img-wrap { position:relative; overflow:hidden; aspect-ratio:3/4; background:var(--cream); }
        .product-img-wrap img { width:100%; height:100%; object-fit:cover; transition:transform 0.6s; }
        .product-card:hover .product-img-wrap img { transform:scale(1.06); }
        .product-no-img { width:100%; height:100%; display:flex; align-items:center; justify-content:center; font-size:40px; color:var(--text-muted); }
        .product-badge { position:absolute; top:12px; left:12px; background:var(--dark); color:var(--gold); padding:4px 10px; font-size:10px; letter-spacing:2px; text-transform:uppercase; }
        .product-info { padding:16px 20px 20px; }
        .product-category { font-size:10px; letter-spacing:3px; text-transform:uppercase; color:var(--text-muted); margin-bottom:6px; }
        .product-name { font-family:'Cormorant Garamond',serif; font-size:18px; color:var(--dark); margin-bottom:8px; }
        .product-price { font-size:16px; color:var(--gold); font-weight:500; letter-spacing:1px; }

        /* SECTIONS */
        .section-header { text-align:center; padding:60px 40px 40px; }
        .section-tag { font-size:11px; letter-spacing:4px; text-transform:uppercase; color:var(--gold); margin-bottom:12px; }
        .section-title { font-family:'Cormorant Garamond',serif; font-size:clamp(32px,5vw,56px); font-weight:300; color:var(--dark); line-height:1.2; }
        .product-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(240px,1fr)); gap:2px; padding:0 40px; }

        /* LAYOUT */
        .layout-sidebar { display:grid; grid-template-columns:260px 1fr; gap:40px; padding:40px; }
        .sidebar { background:var(--white); padding:28px; border:1px solid var(--border); height:fit-content; position:sticky; top:90px; }
        .sidebar h3 { font-size:11px; letter-spacing:3px; text-transform:uppercase; color:var(--text-muted); margin-bottom:20px; padding-bottom:12px; border-bottom:1px solid var(--border); }
        .filter-group { margin-bottom:24px; }
        .filter-label { font-size:11px; letter-spacing:2px; text-transform:uppercase; color:var(--text-muted); margin-bottom:10px; display:block; }
        .filter-option { display:flex; align-items:center; gap:8px; padding:6px 0; cursor:pointer; font-size:13px; }
        .filter-option input { accent-color:var(--gold); }

        /* DASHBOARD */
        .dashboard-layout { display:grid; grid-template-columns:240px 1fr; min-height:calc(100vh - 70px); }
        .dashboard-sidebar { background:var(--dark); padding:32px 20px; position:sticky; top:70px; height:calc(100vh - 70px); overflow-y:auto; }
        .dash-nav-item { display:flex; align-items:center; gap:12px; padding:12px 16px; color:rgba(255,255,255,0.5); text-decoration:none; font-size:13px; letter-spacing:1px; border-radius:2px; margin-bottom:4px; transition:all 0.2s; }
        .dash-nav-item:hover, .dash-nav-item.active { background:rgba(201,169,110,0.15); color:var(--gold); }
        .dash-nav-icon { font-size:18px; width:24px; text-align:center; }
        .dashboard-content { padding:40px; background:var(--ivory); }
        .dash-header { margin-bottom:36px; padding-bottom:24px; border-bottom:1px solid var(--border); }
        .dash-title { font-family:'Cormorant Garamond',serif; font-size:36px; font-weight:300; color:var(--dark); }
        .dash-subtitle { color:var(--text-muted); font-size:14px; margin-top:4px; }
        .stats-grid { display:grid; grid-template-columns:repeat(4,1fr); gap:20px; margin-bottom:40px; }
        .stat-card { background:var(--white); padding:24px; border:1px solid var(--border); }
        .stat-label { font-size:10px; letter-spacing:3px; text-transform:uppercase; color:var(--text-muted); margin-bottom:10px; }
        .stat-value { font-family:'Cormorant Garamond',serif; font-size:36px; color:var(--gold); font-weight:300; }
        .stat-unit { font-size:14px; color:var(--text-muted); }

        /* TABLE */
        .data-table { width:100%; border-collapse:collapse; }
        .data-table th { font-size:10px; letter-spacing:2px; text-transform:uppercase; color:var(--text-muted); padding:12px 16px; text-align:left; border-bottom:1px solid var(--border); font-weight:400; }
        .data-table td { padding:14px 16px; border-bottom:1px solid var(--border); font-size:14px; }
        .data-table tr:hover td { background:var(--cream); }
        .badge { display:inline-block; padding:3px 10px; font-size:10px; letter-spacing:1.5px; text-transform:uppercase; }
        .badge-pending { background:#FFF3CD; color:#856404; }
        .badge-accepted { background:#D1FAE5; color:#065F46; }
        .badge-shipped { background:#DBEAFE; color:#1E40AF; }
        .badge-delivered { background:#D1FAE5; color:#065F46; }
        .badge-cancelled { background:#FEE2E2; color:#991B1B; }

        @media(max-width:768px) {
            .navbar{padding:0 20px;} .nav-links{display:none;}
            .product-grid{padding:0 20px;grid-template-columns:repeat(2,1fr);}
            .layout-sidebar{grid-template-columns:1fr;padding:20px;}
            .dashboard-layout{grid-template-columns:1fr;} .dashboard-sidebar{display:none;}
            .stats-grid{grid-template-columns:repeat(2,1fr);}
            .footer-grid{grid-template-columns:1fr 1fr;}
        }
    </style>
    {% block extra_css %}{% endblock %}
</head>
<body>

<nav class="navbar">
    <a href="{% url 'home' %}" class="nav-logo">MO<span>DA</span></a>
    <ul class="nav-links">
        <li><a href="{% url 'product_list' %}">”®–Ω–∏–º–ª–µ—Ä</a></li>
        <li><a href="{% url 'product_list' %}?category=ustki">“Æ—Å—Ç–∫–∏ –∫–∏–π–∏–º</a></li>
        <li><a href="{% url 'product_list' %}?category=sport">–°–ø–æ—Ä—Ç</a></li>
        <li><a href="{% url 'product_list' %}?category=oyoq">–ê—è“õ –∫–∏–π–∏–º</a></li>
        {% if user.is_authenticated and user.role == 'client' %}<li><a href="{% url 'virtual_tryon' %}" style="color:var(--gold)!important;">‚ú® Try-On</a></li>{% endif %}
    </ul>
    <div class="nav-actions">
        {% if user.is_authenticated %}
            {% if user.role == 'client' %}
                <a href="{% url 'cart' %}" class="cart-icon">üõí{% if cart_count > 0 %}<span class="cart-badge">{{ cart_count }}</span>{% endif %}</a>
                <a href="{% url 'client_dashboard' %}" class="nav-btn active">{{ user.first_name }}</a>
            {% else %}
                <a href="{% url 'seller_dashboard' %}" class="nav-btn active">{{ user.shop_name }}</a>
            {% endif %}
            <a href="{% url 'logout' %}" class="nav-btn">–®—ã“ì—ã—û</a>
        {% else %}
            <a href="{% url 'login' %}" class="nav-btn">–ö–∏—Ä–∏—û</a>
            <a href="{% url 'register_choice' %}" class="nav-btn active">–î–∏–∑–∏–º–≥–µ –∞–ª—ã–Ω—ã—û</a>
        {% endif %}
    </div>
</nav>

{% if messages %}
<div class="messages-container" id="messages">
    {% for msg in messages %}
    <div class="msg msg-{% if msg.tags %}{{ msg.tags }}{% else %}info{% endif %}">
        {{ msg }}<span class="msg-close" onclick="this.parentElement.remove()">‚úï</span>
    </div>
    {% endfor %}
</div>
<script>setTimeout(()=>{const m=document.getElementById('messages');if(m){m.style.opacity='0';m.style.transition='0.5s';setTimeout(()=>m.remove(),500);}},4000);</script>
{% endif %}

<main>{% block content %}{% endblock %}</main>

<footer>
    <div class="footer-grid">
        <div>
            <div class="footer-logo">MODA</div>
            <p class="footer-desc">“ö–∞—Ä–∞“õ–∞–ª–ø–∞“õ—Å—Ç–∞–Ω–Ω—ã“£ –µ“£–∏—Ä–∏ –∑–∞–º–∞–Ω–∞–≥”©–π –∫–∏–π–∏–º –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Å—ã. –°–∞–ø–∞–ª—ã –∫–∏–π–∏–º, —Ç–µ–∑ –∂–µ—Ç–∫–µ—Ä–∏—û, “õ–æ–ª–∞–π–ª—ã –±–∞“≥–∞–ª–∞—Ä.</p>
        </div>
        <div class="footer-col">
            <h4>–ö–∞—Ç–µ–≥–æ—Ä–∏—è–ª–∞—Ä</h4>
            <a href="{% url 'product_list' %}?category=ustki">“Æ—Å—Ç–∫–∏ –∫–∏–π–∏–º</a>
            <a href="{% url 'product_list' %}?category=jemper">–ñ–µ–º–ø–µ—Ä–ª–µ—Ä</a>
            <a href="{% url 'product_list' %}?category=sport">–°–ø–æ—Ä—Ç –∫–∏–π–∏–º</a>
            <a href="{% url 'product_list' %}?category=oyoq">–ê—è“õ –∫–∏–π–∏–º</a>
        </div>
        <div class="footer-col">
            <h4>–•—ã–∑–º–µ—Ç</h4>
            <a href="#">–ë–∏–∑ “≥–∞“õ“õ—ã–º—ã–∑–¥–∞</a>
            <a href="#">–ñ–µ—Ç–∫–µ—Ä–∏—û</a>
            <a href="#">“ö–∞–π—Ç–∞—Ä—ã—û</a>
            <a href="#">–ë–∞–π–ª–∞–Ω—ã—Å</a>
        </div>
        <div class="footer-col">
            <h4>–ê–∫–∫–∞—É–Ω—Ç</h4>
            {% if user.is_authenticated %}
            <a href="{% if user.role == 'client' %}{% url 'client_dashboard' %}{% else %}{% url 'seller_dashboard' %}{% endif %}">–î–∞—à–±–æ—Ä–¥</a>
            <a href="{% url 'logout' %}">–®—ã“ì—ã—û</a>
            {% else %}
            <a href="{% url 'login' %}">–ö–∏—Ä–∏—û</a>
            <a href="{% url 'register_choice' %}">–î–∏–∑–∏–º–≥–µ –∞–ª—ã–Ω—ã—û</a>
            {% endif %}
        </div>
    </div>
    <div class="footer-bottom">¬© 2024 MODA ‚Äî –ë–∞—Ä–ª—ã“õ “≥—É“õ—É“õ–ª–∞—Ä —Å–∞“õ–ª–∞–Ω“ì–∞–Ω</div>
</footer>

{% block extra_js %}{% endblock %}
</body>
</html>
