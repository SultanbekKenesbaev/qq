{% extends 'kiyim/base.html' %}
{% block title %}”®–Ω–∏–º “ö–æ—Å—ã—û ‚Äî MODA{% endblock %}
{% block extra_css %}
<style>
.page-wrap{max-width:900px;margin:60px auto;padding:0 40px;}
.form-card{background:var(--white);border:1px solid var(--border);padding:40px;}
.form-section{margin-bottom:36px;padding-bottom:36px;border-bottom:1px solid var(--border);}
.form-section:last-child{border-bottom:none;margin-bottom:0;}
.form-sec-title{font-size:11px;letter-spacing:3px;text-transform:uppercase;color:var(--text-muted);margin-bottom:24px;display:flex;align-items:center;gap:10px;}
.form-sec-title::after{content:'';flex:1;height:1px;background:var(--border);}
.form-row{display:grid;grid-template-columns:1fr 1fr;gap:20px;}
.size-sel{display:grid;grid-template-columns:repeat(7,1fr);gap:8px;margin-bottom:16px;}
.size-btn{aspect-ratio:1;display:flex;align-items:center;justify-content:center;border:1px solid var(--border);cursor:pointer;font-size:12px;font-family:'Jost',sans-serif;letter-spacing:1px;transition:all 0.2s;background:var(--white);color:var(--text-muted);}
.size-btn.active{background:var(--dark);color:var(--gold);border-color:var(--dark);}
.size-rows{display:flex;flex-direction:column;gap:8px;}
.size-row{display:flex;align-items:center;gap:12px;padding:10px 14px;border:1px solid var(--border);background:var(--cream);}
.img-upload{border:2px dashed var(--border);padding:40px;text-align:center;cursor:pointer;transition:border-color 0.3s;position:relative;}
.img-upload:hover{border-color:var(--gold);}
.img-upload input{position:absolute;inset:0;opacity:0;cursor:pointer;}
.img-preview{display:grid;grid-template-columns:repeat(5,1fr);gap:8px;margin-top:16px;}
.img-prev-item{aspect-ratio:1;background:var(--cream);overflow:hidden;}
.img-prev-item img{width:100%;height:100%;object-fit:cover;}
</style>
{% endblock %}
{% block content %}
<div class="page-wrap">
    <a href="{% url 'seller_dashboard' %}" style="display:inline-flex;align-items:center;gap:8px;color:var(--text-muted);text-decoration:none;font-size:13px;letter-spacing:1px;margin-bottom:20px;">‚Üê –î–∞—à–±–æ—Ä–¥“õ–∞ “õ–∞–π—Ç—ã—û</a>
    <h1 style="font-family:'Cormorant Garamond',serif;font-size:40px;color:var(--dark);margin-bottom:40px;">–ñ–∞“£–∞ ”®–Ω–∏–º “ö–æ—Å—ã—û</h1>
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <div class="form-card">
            <!-- –ù–ï–ì–Ü–ó–ì–ò –ú”ò–õ–ò–ú–ï–¢ -->
            <div class="form-section">
                <div class="form-sec-title">–ù–µ–≥—ñ–∑–≥–∏ –ú”ô–ª–∏–º–µ—Ç</div>
                <div class="form-group"><label class="form-label">”®–Ω–∏–º –ê—Ç—ã *</label><input type="text" name="name" class="form-control" required placeholder="–ú—ã—Å–∞–ª—ã: –ñ–∞–∑“ì—ã –ö–µ–π–ª–µ–∫"></div>
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">–ö–∞—Ç–µ–≥–æ—Ä–∏—è *</label>
                        <select name="category" class="form-control" required>
                            <option value="">–¢–∞“£–ª–∞“£—ã–∑...</option>
                            {% for key, label in form.fields.category.choices %}{% if key %}<option value="{{ key }}">{{ label }}</option>{% endif %}{% endfor %}
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">–°—Ç–∏–ª—å</label>
                        <select name="style" class="form-control">
                            {% for key, label in form.fields.style.choices %}<option value="{{ key }}">{{ label }}</option>{% endfor %}
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group"><label class="form-label">–ë–∞“≥–∞ (—Å—û–º) *</label><input type="number" name="price" class="form-control" required min="0" placeholder="50000"></div>
                    <div class="form-group">
                        <label class="form-label">–ñ—ã–Ω—ã—Å</label>
                        <select name="gender" class="form-control">
                            <option value="male">–ï—Ä–∫–µ–∫</option>
                            <option value="female">–ê—è–ª</option>
                            <option value="unisex" selected>–£–Ω–∏—Å–µ–∫—Å</option>
                        </select>
                    </div>
                </div>
                <div class="form-group"><label class="form-label">–°—ã–ø–∞—Ç–ª–∞–º–∞</label><textarea name="description" class="form-control" rows="4" placeholder="”®–Ω–∏–º “≥–∞“õ“õ—ã–Ω–¥–∞ —Ç–æ–ª—ã“õ –º”ô–ª–∏–º–µ—Ç..."></textarea></div>
            </div>

            <!-- –†–ê–ó–ú–ï–†–õ–ï–† -->
            <div class="form-section">
                <div class="form-sec-title">–†–∞–∑–º–µ—Ä–ª–µ—Ä “≥”ô–º –°–∞–Ω–ª–∞—Ä</div>
                <p style="font-size:13px;color:var(--text-muted);margin-bottom:16px;">–ë–∞—Ä —Ä–∞–∑–º–µ—Ä–ª–µ—Ä–¥–∏ —Ç–∞“£–ª–∞–ø, —Å–∞–Ω—ã–Ω –∫–∏—Ä–∏“£–∏–∑</p>
                <div class="size-sel" id="sizePicker">
                    {% for val, label in size_choices %}
                    <div class="size-btn" onclick="toggleSize('{{ val }}',this)" data-size="{{ val }}">{{ val }}</div>
                    {% endfor %}
                </div>
                <div class="size-rows" id="sizeRows"></div>
            </div>

            <!-- –°–£–†–ï–¢–õ–ï–† -->
            <div class="form-section">
                <div class="form-sec-title">–°—É—Ä–µ—Ç–ª–µ—Ä (1-5 —Å—É—Ä–µ—Ç)</div>
                <div class="img-upload" id="uploadArea">
                    <input type="file" name="images" multiple accept="image/*" id="imageInput" onchange="previewImages(this)">
                    <div style="font-size:40px;margin-bottom:12px;">üì∑</div>
                    <p style="color:var(--text-muted);font-size:14px;">–°—É—Ä–µ—Ç–ª–µ—Ä–¥–∏ —Å“Ø–π—Ä–µ–ø —Ç–∞—Å–ª–∞“£—ã–∑ —è–∫–∏ –±–∞—Å—ã“£—ã–∑</p>
                    <p style="font-size:12px;color:var(--text-muted);margin-top:6px;">PNG, JPG, WEBP ‚Ä¢ –º–∞—Ö 5 —Å—É—Ä–µ—Ç</p>
                </div>
                <div class="img-preview" id="imgPreview"></div>
            </div>

            <div style="display:flex;gap:16px;justify-content:flex-end;">
                <a href="{% url 'seller_dashboard' %}" class="btn btn-outline">–ë–∞—Å —Ç–∞—Ä—Ç—ã—û</a>
                <button type="submit" class="btn btn-gold">”®–Ω–∏–º–¥–∏ –°–∞“õ–ª–∞—û</button>
            </div>
        </div>
    </form>
</div>
<script>
const selSizes={};
function toggleSize(size,el){
    if(selSizes[size]){delete selSizes[size];el.classList.remove('active');}
    else{selSizes[size]=0;el.classList.add('active');}
    updateRows();
}
function updateRows(){
    const c=document.getElementById('sizeRows');c.innerHTML='';
    Object.keys(selSizes).forEach(size=>{
        const r=document.createElement('div');r.className='size-row';
        r.innerHTML=`<span style="width:48px;text-align:center;font-weight:500;color:var(--gold);">${size}</span><span style="flex:1;font-size:13px;color:var(--text-muted);">—Å–∞–Ω—ã:</span><input type="hidden" name="sizes" value="${size}"><input type="number" name="quantities" class="form-control" style="width:80px;" min="0" value="0" placeholder="0">`;
        c.appendChild(r);
    });
}
function previewImages(input){
    const p=document.getElementById('imgPreview');p.innerHTML='';
    Array.from(input.files).slice(0,5).forEach(file=>{
        const r=new FileReader();
        r.onload=e=>{const d=document.createElement('div');d.className='img-prev-item';d.innerHTML=`<img src="${e.target.result}">`;p.appendChild(d);};
        r.readAsDataURL(file);
    });
}
</script>
{% endblock %}
